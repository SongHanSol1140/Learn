# ğŸ¯ Spring Boot ì–´ë…¸í…Œì´ì…˜ ì™„ì „ ì •ë³µ (ì´ˆë³´ììš©)

## ğŸ“š ëª©ì°¨
1. [Lombok ì–´ë…¸í…Œì´ì…˜ (ì½”ë“œ ìë™ ìƒì„±)](#1-lombok-ì–´ë…¸í…Œì´ì…˜)
2. [Validation ì–´ë…¸í…Œì´ì…˜ (ì…ë ¥ê°’ ê²€ì¦)](#2-validation-ì–´ë…¸í…Œì´ì…˜)
3. [Spring ê³„ì¸µ ì–´ë…¸í…Œì´ì…˜ (ì—­í•  ì •ì˜)](#3-spring-ê³„ì¸µ-ì–´ë…¸í…Œì´ì…˜)
4. [HTTP ë§¤í•‘ ì–´ë…¸í…Œì´ì…˜ (API ì—”ë“œí¬ì¸íŠ¸)](#4-http-ë§¤í•‘-ì–´ë…¸í…Œì´ì…˜)
5. [ì˜ˆì™¸ ì²˜ë¦¬ ì–´ë…¸í…Œì´ì…˜](#5-ì˜ˆì™¸-ì²˜ë¦¬-ì–´ë…¸í…Œì´ì…˜)
6. [Spring Boot ê¸°ë³¸ ì–´ë…¸í…Œì´ì…˜](#6-spring-boot-ê¸°ë³¸-ì–´ë…¸í…Œì´ì…˜)

---

## 1. Lombok ì–´ë…¸í…Œì´ì…˜

> **Lombokì´ë€?** ë°˜ë³µì ì¸ ì½”ë“œ(getter, setter, ìƒì„±ì ë“±)ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬

### `@Getter` & `@Setter`

```java
// âŒ Lombok ì—†ì´ ì§ì ‘ ì‘ì„±
public class User {
    private Long id;
    private String username;

    // getterë¥¼ ì§ì ‘ ì‘ì„±í•´ì•¼ í•¨
    public Long getId() {
        return id;
    }

    public String getUsername() {
        return username;
    }

    // setterë¥¼ ì§ì ‘ ì‘ì„±í•´ì•¼ í•¨
    public void setId(Long id) {
        this.id = id;
    }

    public void setUsername(String username) {
        this.username = username;
    }
}
```

```java
// âœ… Lombok ì‚¬ìš©
@Getter  // ëª¨ë“  í•„ë“œì˜ getter ë©”ì„œë“œë¥¼ ìë™ ìƒì„±
@Setter  // ëª¨ë“  í•„ë“œì˜ setter ë©”ì„œë“œë¥¼ ìë™ ìƒì„±
public class User {
    private Long id;
    private String username;

    // Lombokì´ ìë™ìœ¼ë¡œ getId(), getUsername(), setId(), setUsername() ìƒì„±!
}
```

**ì™œ í•„ìš”í•œê°€?**
- í•„ë“œê°€ 10ê°œë©´ ë©”ì„œë“œ 20ê°œ(getter 10ê°œ + setter 10ê°œ)ë¥¼ ì‘ì„±í•´ì•¼ í•¨
- Lombokì´ ì»´íŒŒì¼ ì‹œì ì— ìë™ ìƒì„±í•´ì¤Œ

**ì—†ìœ¼ë©´ ì–´ë–»ê²Œ ë˜ë‚˜?**
```java
user.getUsername()  // âŒ ì»´íŒŒì¼ ì—ëŸ¬: cannot find symbol
```

---

### `@NoArgsConstructor`

```java
// âŒ Lombok ì—†ì´
public class User {
    private Long id;
    private String username;

    // ê¸°ë³¸ ìƒì„±ìë¥¼ ì§ì ‘ ì‘ì„±
    public User() {
    }
}
```

```java
// âœ… Lombok ì‚¬ìš©
@NoArgsConstructor  // íŒŒë¼ë¯¸í„°ê°€ ì—†ëŠ” ìƒì„±ì ìë™ ìƒì„±
public class User {
    private Long id;
    private String username;

    // User() ìƒì„±ìê°€ ìë™ ìƒì„±ë¨
}
```

**ì™œ í•„ìš”í•œê°€?**
- JPA(Phase 2)ì—ì„œ Entityë¥¼ ìƒì„±í•  ë•Œ ê¸°ë³¸ ìƒì„±ìê°€ í•„ìˆ˜
- Jackson(JSON ë³€í™˜)ì´ ê°ì²´ë¥¼ ë§Œë“¤ ë•Œ ê¸°ë³¸ ìƒì„±ì ì‚¬ìš©

**ì‚¬ìš© ì˜ˆì‹œ:**
```java
User user = new User();  // íŒŒë¼ë¯¸í„° ì—†ì´ ìƒì„±
user.setId(1L);
user.setUsername("john");
```

---

### `@AllArgsConstructor`

```java
// âŒ Lombok ì—†ì´
public class User {
    private Long id;
    private String username;
    private String email;

    // ëª¨ë“  í•„ë“œë¥¼ ë°›ëŠ” ìƒì„±ìë¥¼ ì§ì ‘ ì‘ì„±
    public User(Long id, String username, String email) {
        this.id = id;
        this.username = username;
        this.email = email;
    }
}
```

```java
// âœ… Lombok ì‚¬ìš©
@AllArgsConstructor  // ëª¨ë“  í•„ë“œë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ” ìƒì„±ì ìë™ ìƒì„±
public class User {
    private Long id;
    private String username;
    private String email;

    // User(Long id, String username, String email) ìƒì„±ìê°€ ìë™ ìƒì„±ë¨
}
```

**ì‚¬ìš© ì˜ˆì‹œ:**
```java
User user = new User(1L, "john", "john@example.com");  // í•œ ë²ˆì— ì´ˆê¸°í™”
```

---

### `@Builder`

```java
// âŒ Lombok ì—†ì´ - ì½”ë“œê°€ ì¥í™©í•¨
User user = new User();
user.setId(1L);
user.setUsername("john");
user.setEmail("john@example.com");
user.setAge(30);
// í•„ë“œê°€ ë§ìœ¼ë©´ ì—„ì²­ ê¸¸ì–´ì§
```

```java
// âœ… Lombok @Builder ì‚¬ìš©
@Builder
public class User {
    private Long id;
    private String username;
    private String email;
    private Integer age;
}

// ì‚¬ìš© ì‹œ
User user = User.builder()
    .id(1L)
    .username("john")
    .email("john@example.com")
    .age(30)
    .build();
```

**ì™œ Builder íŒ¨í„´ì´ ì¢‹ì€ê°€?**

1. **ê°€ë…ì„±**: ì–´ë–¤ ê°’ì´ ì–´ëŠ í•„ë“œì— ë“¤ì–´ê°€ëŠ”ì§€ ëª…í™•
```java
// âŒ ìƒì„±ì - ë­ê°€ ë­”ì§€ í—·ê°ˆë¦¼
new User(1L, "john", "john@example.com", 30, "USER", "password123");

// âœ… Builder - ëª…í™•í•¨
User.builder()
    .id(1L)
    .username("john")
    .email("john@example.com")
    .age(30)
    .role("USER")
    .password("password123")
    .build();
```

2. **ì„ íƒì  ì„¤ì •**: í•„ìš”í•œ í•„ë“œë§Œ ì„¤ì • ê°€ëŠ¥
```java
User user = User.builder()
    .username("john")
    .email("john@example.com")
    .build();
// age, role ë“±ì€ ì„¤ì • ì•ˆ í•¨
```

---

### `@RequiredArgsConstructor`

```java
// âŒ Lombok ì—†ì´
@Service
public class UserService {
    private final UserRepository userRepository;  // final í•„ë“œ

    // final í•„ë“œì— ëŒ€í•œ ìƒì„±ìë¥¼ ì§ì ‘ ì‘ì„±
    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }
}
```

```java
// âœ… Lombok ì‚¬ìš©
@Service
@RequiredArgsConstructor  // final í•„ë“œì— ëŒ€í•œ ìƒì„±ì ìë™ ìƒì„±
public class UserService {
    private final UserRepository userRepository;

    // UserService(UserRepository userRepository) ìƒì„±ìê°€ ìë™ ìƒì„±ë¨
}
```

**ì™œ í•„ìš”í•œê°€?**
- Springì˜ **ìƒì„±ì ì£¼ì…(DI)**ì„ ê°„í¸í•˜ê²Œ ì‚¬ìš©
- final í•„ë“œê°€ 10ê°œë©´ ìƒì„±ì ì½”ë“œë„ 10ì¤„ â†’ Lombokì´ ìë™ ìƒì„±

**Springì´ ìë™ìœ¼ë¡œ ì£¼ì…í•˜ëŠ” ê³¼ì •:**
```java
// Springì´ ë‚´ë¶€ì ìœ¼ë¡œ í•˜ëŠ” ì¼
UserRepository repo = new UserRepository();
UserService service = new UserService(repo);  // ìƒì„±ì ì£¼ì…
```

---

### `@Slf4j`

```java
// âŒ Lombok ì—†ì´
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class UserService {
    // Logger ê°ì²´ë¥¼ ì§ì ‘ ìƒì„±
    private static final Logger log = LoggerFactory.getLogger(UserService.class);

    public void createUser() {
        log.info("Creating user...");
    }
}
```

```java
// âœ… Lombok ì‚¬ìš©
@Slf4j  // Logger ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±
public class UserService {
    // log ê°ì²´ê°€ ìë™ìœ¼ë¡œ ìƒì„±ë¨

    public void createUser() {
        log.info("Creating user...");
        log.debug("Debug message");
        log.error("Error occurred", exception);
    }
}
```

**ë¡œê·¸ ë ˆë²¨:**
```java
log.trace("ê°€ì¥ ìƒì„¸í•œ ë¡œê·¸");
log.debug("ë””ë²„ê¹…ìš© ë¡œê·¸");
log.info("ì¼ë°˜ ì •ë³´");       // ê¸°ë³¸ì ìœ¼ë¡œ ì´ê²ƒë§Œ ì¶œë ¥ë¨
log.warn("ê²½ê³ ");
log.error("ì—ëŸ¬", exception);
```

---

## 2. Validation ì–´ë…¸í…Œì´ì…˜

> **ëª©ì :** APIë¡œ ë“¤ì–´ì˜¤ëŠ” ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ê²€ì¦

### `@NotBlank`

```java
public class UserCreateRequest {
    @NotBlank(message = "ì‚¬ìš©ìëª…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    private String username;
}
```

**ê²€ì¦ ê·œì¹™:**
- `null` âŒ
- `""` (ë¹ˆ ë¬¸ìì—´) âŒ
- `"   "` (ê³µë°±ë§Œ) âŒ
- `"john"` âœ…

**ì—†ìœ¼ë©´ ì–´ë–»ê²Œ ë˜ë‚˜?**
```java
// @NotBlank ì—†ìœ¼ë©´ ì´ëŸ° ì˜ëª»ëœ ë°ì´í„°ê°€ ë“¤ì–´ì˜´
{
  "username": "",
  "email": "test@example.com"
}
// usernameì´ ë¹ˆ ë¬¸ìì—´ì¸ë° DBì— ì €ì¥ë¨ â†’ ë°ì´í„° ì˜¤ì—¼!
```

**ë™ì‘ ê³¼ì •:**
```java
@PostMapping
public ResponseEntity<UserResponse> createUser(
    @Valid @RequestBody UserCreateRequest request) {  // @Validê°€ ê²€ì¦ ì‹¤í–‰
    // @Validê°€ ì—†ìœ¼ë©´ ê²€ì¦ ì•ˆ í•¨!
}
```

---

### `@Email`

```java
@Email(message = "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤")
private String email;
```

**ê²€ì¦ ê·œì¹™:**
- `"test@example.com"` âœ…
- `"invalid-email"` âŒ
- `"test@"` âŒ
- `"@example.com"` âŒ

**ë‚´ë¶€ì ìœ¼ë¡œ ì •ê·œì‹ ì‚¬ìš©:**
```java
// Springì´ ë‚´ë¶€ì ìœ¼ë¡œ ì´ëŸ° ì •ê·œì‹ìœ¼ë¡œ ê²€ì¦
^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$
```

---

### `@Size`

```java
@Size(min = 3, max = 20, message = "ì‚¬ìš©ìëª…ì€ 3-20ì ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤")
private String username;

@Size(min = 8, message = "ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤")
private String password;
```

**ê²€ì¦ ì˜ˆì‹œ:**
```java
"ab"           // âŒ 3ì ë¯¸ë§Œ
"john"         // âœ… 3~20ì
"verylongusernameover20chars"  // âŒ 20ì ì´ˆê³¼
```

---

### `@Min` & `@Max`

```java
@Min(value = 1, message = "ë‚˜ì´ëŠ” 1ì„¸ ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤")
@Max(value = 150, message = "ë‚˜ì´ëŠ” 150ì„¸ ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤")
private Integer age;
```

**ê²€ì¦ ì˜ˆì‹œ:**
```java
0    // âŒ 1 ë¯¸ë§Œ
25   // âœ…
200  // âŒ 150 ì´ˆê³¼
```

---

### ìœ íš¨ì„± ê²€ì¦ ì „ì²´ íë¦„

```java
// 1. í´ë¼ì´ì–¸íŠ¸ ìš”ì²­
POST /api/users
{
  "username": "ab",           // âŒ 3ì ë¯¸ë§Œ
  "email": "invalid-email",   // âŒ ì´ë©”ì¼ í˜•ì‹ ì•„ë‹˜
  "password": "123",          // âŒ 8ì ë¯¸ë§Œ
  "age": 200                  // âŒ 150 ì´ˆê³¼
}

// 2. Controller
@PostMapping
public ResponseEntity<UserResponse> createUser(
    @Valid @RequestBody UserCreateRequest request) {  // â† @Validê°€ ê²€ì¦ ì‹¤í–‰
    // ì—¬ê¸°ê¹Œì§€ ì˜¤ê¸° ì „ì— ì—ëŸ¬ ë°œìƒ!
}

// 3. ê²€ì¦ ì‹¤íŒ¨ â†’ MethodArgumentNotValidException ë°œìƒ
// 4. GlobalExceptionHandlerê°€ ì¡ì•„ì„œ ì²˜ë¦¬
@ExceptionHandler(MethodArgumentNotValidException.class)
public ResponseEntity<ErrorResponse> handleValidationException(...) {
    // ì—ëŸ¬ ì‘ë‹µ ë°˜í™˜
}

// 5. í´ë¼ì´ì–¸íŠ¸ê°€ ë°›ëŠ” ì‘ë‹µ
{
  "timestamp": "2025-01-15T10:30:00",
  "status": 400,
  "error": "Validation Failed",
  "message": "ì…ë ¥ê°’ ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
  "validationErrors": {
    "username": "ì‚¬ìš©ìëª…ì€ 3-20ì ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤",
    "email": "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤",
    "password": "ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤",
    "age": "ë‚˜ì´ëŠ” 150ì„¸ ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤"
  }
}
```

---

## 3. Spring ê³„ì¸µ ì–´ë…¸í…Œì´ì…˜

### `@Repository`

```java
@Repository
public class UserRepository {
    private final Map<Long, User> userStore = new ConcurrentHashMap<>();

    public User save(User user) { ... }
    public Optional<User> findById(Long id) { ... }
}
```

**ì—­í• :**
1. **Spring Beanìœ¼ë¡œ ë“±ë¡**: Springì´ ì´ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬
2. **ì˜ˆì™¸ ë³€í™˜**: DB ê´€ë ¨ ì˜ˆì™¸ë¥¼ Springì˜ DataAccessExceptionìœ¼ë¡œ ìë™ ë³€í™˜
3. **ê³„ì¸µ êµ¬ë¶„**: "ì´ í´ë˜ìŠ¤ëŠ” ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì´ë‹¤"ë¼ê³  ëª…ì‹œ

**ì—†ìœ¼ë©´ ì–´ë–»ê²Œ ë˜ë‚˜?**
```java
// âŒ @Repository ì—†ìœ¼ë©´
public class UserRepository { }

// Serviceì—ì„œ ì£¼ì… ì‹œë„
@Service
public class UserService {
    private final UserRepository userRepository;  // âŒ ì—ëŸ¬!
}

// ì—ëŸ¬ ë©”ì‹œì§€:
// NoSuchBeanDefinitionException:
// No qualifying bean of type 'UserRepository' available
```

**Springì´ í•˜ëŠ” ì¼:**
```java
// Spring ë‚´ë¶€ ë™ì‘ (ì˜ì‚¬ ì½”ë“œ)
if (í´ë˜ìŠ¤ì— @Repositoryê°€ ìˆìœ¼ë©´) {
    UserRepository bean = new UserRepository();
    ì»¨í…Œì´ë„ˆì— ì €ì¥(bean);
}
```

---

### `@Service`

```java
@Service
public class UserService {
    private final UserRepository userRepository;

    public UserResponse createUser(UserCreateRequest request) {
        // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    }
}
```

**ì—­í• :**
1. **Spring Beanìœ¼ë¡œ ë“±ë¡**
2. **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ ëª…ì‹œ**: "ì—¬ê¸°ì„œ í•µì‹¬ ë¡œì§ì„ ì²˜ë¦¬í•œë‹¤"
3. **íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ëŒ€ìƒ**: Phase 2ì—ì„œ `@Transactional`ê³¼ í•¨ê»˜ ì‚¬ìš©

**@Component vs @Service:**
```java
@Component  // ì¼ë°˜ì ì¸ Spring Bean
public class EmailSender { }

@Service    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” Bean (ì˜ë¯¸ìƒ êµ¬ë¶„)
public class UserService { }
```

ê¸°ëŠ¥ì€ ë™ì¼í•˜ì§€ë§Œ, `@Service`ë¥¼ ì“°ë©´ "ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ"ì„ì„ ëª…í™•íˆ ì•Œ ìˆ˜ ìˆìŒ

---

### `@RestController`

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    @GetMapping
    public List<UserResponse> getAllUsers() {
        return userService.getAllUsers();
    }
}
```

**@RestController = @Controller + @ResponseBody**

```java
// âŒ @Controllerë§Œ ì‚¬ìš© (ì˜›ë‚  ë°©ì‹)
@Controller
public class UserController {
    @GetMapping("/api/users")
    @ResponseBody  // ëª¨ë“  ë©”ì„œë“œë§ˆë‹¤ ë¶™ì—¬ì•¼ í•¨
    public List<UserResponse> getAllUsers() { ... }

    @GetMapping("/api/users/{id}")
    @ResponseBody  // ë˜ ë¶™ì—¬ì•¼ í•¨
    public UserResponse getUserById(@PathVariable Long id) { ... }
}
```

```java
// âœ… @RestController ì‚¬ìš© (í˜„ëŒ€ ë°©ì‹)
@RestController  // @ResponseBodyê°€ ìë™ìœ¼ë¡œ ëª¨ë“  ë©”ì„œë“œì— ì ìš©ë¨
public class UserController {
    @GetMapping("/api/users")
    public List<UserResponse> getAllUsers() { ... }

    @GetMapping("/api/users/{id}")
    public UserResponse getUserById(@PathVariable Long id) { ... }
}
```

**@ResponseBodyì˜ ì—­í• :**
```java
// @ResponseBodyê°€ ì—†ìœ¼ë©´
return userResponse;
// â†’ Springì´ "userResponse.jsp" ê°™ì€ View íŒŒì¼ì„ ì°¾ìœ¼ë ¤ í•¨

// @ResponseBodyê°€ ìˆìœ¼ë©´
return userResponse;
// â†’ Springì´ ê°ì²´ë¥¼ JSONìœ¼ë¡œ ë³€í™˜í•´ì„œ HTTP ì‘ë‹µ Bodyì— ë‹´ìŒ

// ì‹¤ì œ HTTP ì‘ë‹µ
{
  "id": 1,
  "username": "john",
  "email": "john@example.com"
}
```

---

## 4. HTTP ë§¤í•‘ ì–´ë…¸í…Œì´ì…˜

### `@RequestMapping`

```java
@RestController
@RequestMapping("/api/users")  // ê¸°ë³¸ ê²½ë¡œ ì„¤ì •
public class UserController {

    @GetMapping  // ì‹¤ì œ ê²½ë¡œ: GET /api/users
    public List<UserResponse> getAllUsers() { ... }

    @GetMapping("/{id}")  // ì‹¤ì œ ê²½ë¡œ: GET /api/users/1
    public UserResponse getUserById(@PathVariable Long id) { ... }
}
```

**ì—†ìœ¼ë©´:**
```java
@RestController
public class UserController {

    @GetMapping("/api/users")  // ë§¤ë²ˆ ì „ì²´ ê²½ë¡œë¥¼ ì¨ì•¼ í•¨
    public List<UserResponse> getAllUsers() { ... }

    @GetMapping("/api/users/{id}")  // ì¤‘ë³µ!
    public UserResponse getUserById(@PathVariable Long id) { ... }
}
```

---

### `@GetMapping`, `@PostMapping`, `@PutMapping`, `@DeleteMapping`

```java
@GetMapping              // GET /api/users (ì¡°íšŒ)
public List<UserResponse> getAllUsers() { ... }

@PostMapping             // POST /api/users (ìƒì„±)
public UserResponse createUser(@RequestBody UserCreateRequest request) { ... }

@PutMapping("/{id}")     // PUT /api/users/1 (ì „ì²´ ìˆ˜ì •)
public UserResponse updateUser(@PathVariable Long id, @RequestBody UserUpdateRequest request) { ... }

@DeleteMapping("/{id}")  // DELETE /api/users/1 (ì‚­ì œ)
public void deleteUser(@PathVariable Long id) { ... }
```

**HTTP ë©”ì„œë“œë³„ ì—­í• :**
| ë©”ì„œë“œ | ìš©ë„ | ì˜ˆì‹œ |
|--------|------|------|
| GET | ì¡°íšŒ (ì½ê¸°) | ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ |
| POST | ìƒì„± | ìƒˆ ì‚¬ìš©ì ë“±ë¡ |
| PUT | ì „ì²´ ìˆ˜ì • | ì‚¬ìš©ì ì •ë³´ ì „ì²´ ì—…ë°ì´íŠ¸ |
| PATCH | ë¶€ë¶„ ìˆ˜ì • | ì´ë©”ì¼ë§Œ ë³€ê²½ |
| DELETE | ì‚­ì œ | ì‚¬ìš©ì ì‚­ì œ |

---

### `@PathVariable`

```java
@GetMapping("/{id}")
public UserResponse getUserById(@PathVariable Long id) {
    // id íŒŒë¼ë¯¸í„°ì— URLì˜ {id} ê°’ì´ ìë™ìœ¼ë¡œ ë“¤ì–´ê°
}
```

**ë™ì‘ ì˜ˆì‹œ:**
```bash
# ìš”ì²­
GET /api/users/123

# Springì´ í•˜ëŠ” ì¼
1. URLì—ì„œ "123" ì¶”ì¶œ
2. Long íƒ€ì…ìœ¼ë¡œ ë³€í™˜
3. id íŒŒë¼ë¯¸í„°ì— í• ë‹¹

# ë©”ì„œë“œ ë‚´ë¶€
public UserResponse getUserById(@PathVariable Long id) {
    System.out.println(id);  // ì¶œë ¥: 123
}
```

**ì—¬ëŸ¬ ê°œ ì‚¬ìš©:**
```java
@GetMapping("/posts/{postId}/comments/{commentId}")
public Comment getComment(
    @PathVariable Long postId,
    @PathVariable Long commentId) {
    // GET /posts/5/comments/10
    // postId = 5, commentId = 10
}
```

---

### `@RequestBody`

```java
@PostMapping
public UserResponse createUser(@RequestBody UserCreateRequest request) {
    // HTTP ìš”ì²­ì˜ Body(JSON)ì„ ìë™ìœ¼ë¡œ ê°ì²´ë¡œ ë³€í™˜
}
```

**ë™ì‘ ê³¼ì •:**
```bash
# 1. í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ JSON
POST /api/users
Content-Type: application/json

{
  "username": "john",
  "email": "john@example.com",
  "password": "password123",
  "age": 30
}

# 2. Springì´ í•˜ëŠ” ì¼
- JSONì„ ì½ìŒ
- Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ JSON â†’ UserCreateRequest ê°ì²´ë¡œ ë³€í™˜
- request íŒŒë¼ë¯¸í„°ì— í• ë‹¹

# 3. ë©”ì„œë“œ ë‚´ë¶€
public UserResponse createUser(@RequestBody UserCreateRequest request) {
    System.out.println(request.getUsername());  // "john"
    System.out.println(request.getEmail());     // "john@example.com"
}
```

**@RequestBody ì—†ìœ¼ë©´:**
```java
@PostMapping
public UserResponse createUser(UserCreateRequest request) {  // @RequestBody ì—†ìŒ
    System.out.println(request.getUsername());  // null!
}
// Springì´ JSONì„ ê°ì²´ë¡œ ë³€í™˜ ì•ˆ í•¨ â†’ ëª¨ë“  í•„ë“œê°€ null
```

---

### `@Valid`

```java
@PostMapping
public ResponseEntity<UserResponse> createUser(
    @Valid @RequestBody UserCreateRequest request) {  // â† @Valid
    // @Validê°€ request ê°ì²´ì˜ ëª¨ë“  ê²€ì¦ ì–´ë…¸í…Œì´ì…˜ì„ ì‹¤í–‰
}
```

**ë™ì‘ íë¦„:**
```java
// 1. JSON â†’ UserCreateRequest ê°ì²´ ë³€í™˜
UserCreateRequest request = new UserCreateRequest();
request.setUsername("ab");  // @Size(min=3) ìœ„ë°˜!

// 2. @Validê°€ ê²€ì¦ ì‹¤í–‰
if (request.getUsername().length() < 3) {
    throw new MethodArgumentNotValidException(...);
}

// 3. ê²€ì¦ í†µê³¼í•˜ë©´ ë©”ì„œë“œ ì‹¤í–‰, ì‹¤íŒ¨í•˜ë©´ ì˜ˆì™¸ ë˜ì§
```

**@Valid ì—†ìœ¼ë©´:**
```java
@PostMapping
public ResponseEntity<UserResponse> createUser(
    @RequestBody UserCreateRequest request) {  // @Valid ì—†ìŒ

    // ê²€ì¦ ì–´ë…¸í…Œì´ì…˜ì´ ìˆì–´ë„ ë¬´ì‹œë¨!
    // "ab" ê°™ì€ ì˜ëª»ëœ ë°ì´í„°ê°€ ê·¸ëŒ€ë¡œ DBì— ì €ì¥ë¨
}
```

---

## 5. ì˜ˆì™¸ ì²˜ë¦¬ ì–´ë…¸í…Œì´ì…˜

### `@RestControllerAdvice`

```java
@RestControllerAdvice
public class GlobalExceptionHandler {
    // ëª¨ë“  @RestControllerì—ì„œ ë°œìƒí•œ ì˜ˆì™¸ë¥¼ ì—¬ê¸°ì„œ ì²˜ë¦¬
}
```

**ì—­í• :**
- **ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬**: ëª¨ë“  Controllerì—ì„œ ë°œìƒí•œ ì˜ˆì™¸ë¥¼ í•œ ê³³ì—ì„œ ì²˜ë¦¬
- **@RestController + @ControllerAdvice** í•©ì¹œ ê²ƒ

**ì—†ìœ¼ë©´ ì–´ë–»ê²Œ ë˜ë‚˜?**
```java
// @RestControllerAdvice ì—†ì´ ì˜ˆì™¸ ì²˜ë¦¬

@RestController
public class UserController {
    @GetMapping("/{id}")
    public UserResponse getUserById(@PathVariable Long id) {
        try {
            return userService.getUserById(id);
        } catch (UserNotFoundException e) {
            // ëª¨ë“  ë©”ì„œë“œë§ˆë‹¤ try-catch ì‘ì„±í•´ì•¼ í•¨!
            return ResponseEntity.status(404).body(...);
        }
    }

    @PostMapping
    public UserResponse createUser(@Valid @RequestBody UserCreateRequest request) {
        try {
            return userService.createUser(request);
        } catch (UsernameAlreadyExistsException e) {
            // ë˜ try-catch!
            return ResponseEntity.status(409).body(...);
        }
    }
}
```

```java
// @RestControllerAdvice ì‚¬ìš©

@RestControllerAdvice
public class GlobalExceptionHandler {

    @ExceptionHandler(UserNotFoundException.class)
    public ResponseEntity<ErrorResponse> handleUserNotFoundException(UserNotFoundException ex) {
        // ëª¨ë“  Controllerì—ì„œ UserNotFoundExceptionì´ ë°œìƒí•˜ë©´ ì—¬ê¸°ë¡œ ì˜´
        return ResponseEntity.status(404).body(...);
    }
}

@RestController
public class UserController {
    @GetMapping("/{id}")
    public UserResponse getUserById(@PathVariable Long id) {
        // try-catch í•„ìš” ì—†ìŒ! ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ GlobalExceptionHandlerê°€ ì²˜ë¦¬
        return userService.getUserById(id);
    }
}
```

---

### `@ExceptionHandler`

```java
@RestControllerAdvice
public class GlobalExceptionHandler {

    @ExceptionHandler(UserNotFoundException.class)  // ì´ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬
    public ResponseEntity<ErrorResponse> handleUserNotFoundException(
            UserNotFoundException ex) {

        ErrorResponse error = ErrorResponse.builder()
            .status(404)
            .message(ex.getMessage())
            .build();

        return ResponseEntity.status(404).body(error);
    }

    @ExceptionHandler(UsernameAlreadyExistsException.class)  // ë‹¤ë¥¸ ì˜ˆì™¸ ì²˜ë¦¬
    public ResponseEntity<ErrorResponse> handleUsernameAlreadyExistsException(
            UsernameAlreadyExistsException ex) {
        // ...
    }
}
```

**ë™ì‘ íë¦„:**
```java
// 1. Serviceì—ì„œ ì˜ˆì™¸ ë°œìƒ
@Service
public class UserService {
    public UserResponse getUserById(Long id) {
        User user = userRepository.findById(id)
            .orElseThrow(() -> new UserNotFoundException("User not found with id: " + id));
        // â†‘ ì˜ˆì™¸ ë°œìƒ!
    }
}

// 2. ControllerëŠ” ì˜ˆì™¸ë¥¼ ì¡ì§€ ì•ŠìŒ
@RestController
public class UserController {
    @GetMapping("/{id}")
    public UserResponse getUserById(@PathVariable Long id) {
        return userService.getUserById(id);  // ì˜ˆì™¸ê°€ ì—¬ê¸°ì„œ í„°ì§
    }
}

// 3. Springì´ GlobalExceptionHandlerì—ì„œ ì ì ˆí•œ @ExceptionHandler ì°¾ì•„ì„œ ì‹¤í–‰
@ExceptionHandler(UserNotFoundException.class)
public ResponseEntity<ErrorResponse> handle(...) {
    // ì—¬ê¸°ì„œ ì²˜ë¦¬!
}

// 4. í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µ
HTTP/1.1 404 Not Found
{
  "status": 404,
  "message": "User not found with id: 123"
}
```

---

## 6. Spring Boot ê¸°ë³¸ ì–´ë…¸í…Œì´ì…˜

### `@SpringBootApplication`

```java
@SpringBootApplication
public class HelloSpringApiApplication {
    public static void main(String[] args) {
        SpringApplication.run(HelloSpringApiApplication.class, args);
    }
}
```

**@SpringBootApplication = 3ê°œ ì–´ë…¸í…Œì´ì…˜ í•©ì¹œ ê²ƒ**

```java
@Configuration           // ì´ í´ë˜ìŠ¤ê°€ ì„¤ì • íŒŒì¼ì„ì„ ëª…ì‹œ
@EnableAutoConfiguration // Spring Bootì˜ ìë™ ì„¤ì • í™œì„±í™”
@ComponentScan          // ê°™ì€ íŒ¨í‚¤ì§€ ë° í•˜ìœ„ íŒ¨í‚¤ì§€ì˜ Component ìŠ¤ìº”
public class HelloSpringApiApplication { ... }
```

**@ComponentScanì˜ ë™ì‘:**
```java
// í”„ë¡œì íŠ¸ êµ¬ì¡°
com.example.hellospringapi/
â”œâ”€â”€ HelloSpringApiApplication.java  â† @SpringBootApplication
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ UserController.java         â† @RestController
â”œâ”€â”€ service/
â”‚   â””â”€â”€ UserService.java            â† @Service
â””â”€â”€ repository/
    â””â”€â”€ UserRepository.java         â† @Repository

// Springì´ í•˜ëŠ” ì¼:
1. HelloSpringApiApplicationì´ ìˆëŠ” íŒ¨í‚¤ì§€(com.example.hellospringapi) ìŠ¤ìº”
2. í•˜ìœ„ íŒ¨í‚¤ì§€(controller, service, repository)ë„ ìŠ¤ìº”
3. @Component, @Service, @Repository, @RestController ë¶™ì€ í´ë˜ìŠ¤ ì°¾ìŒ
4. ì°¾ì€ í´ë˜ìŠ¤ë“¤ì˜ ì¸ìŠ¤í„´ìŠ¤(Bean) ìƒì„±
5. ì˜ì¡´ì„± ì£¼ì…
```

**ì˜ëª»ëœ íŒ¨í‚¤ì§€ êµ¬ì¡°:**
```java
com.example/
â”œâ”€â”€ hellospringapi/
â”‚   â””â”€â”€ HelloSpringApiApplication.java  â† @SpringBootApplication
â””â”€â”€ other/
    â””â”€â”€ UserService.java                â† ìŠ¤ìº” ì•ˆ ë¨! (ë‹¤ë¥¸ íŒ¨í‚¤ì§€)

// ì—ëŸ¬ ë°œìƒ!
// No qualifying bean of type 'UserService' available
```

---

## ğŸ“Š ì–´ë…¸í…Œì´ì…˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Lombok ê´€ë ¨
- [ ] `@Getter`, `@Setter`ê°€ ë¬´ì—‡ì„ ìë™ ìƒì„±í•˜ëŠ”ì§€ ì•ˆë‹¤
- [ ] `@NoArgsConstructor`ì™€ `@AllArgsConstructor`ì˜ ì°¨ì´ë¥¼ ì•ˆë‹¤
- [ ] `@Builder` íŒ¨í„´ì„ ì™œ ì‚¬ìš©í•˜ëŠ”ì§€ ì´í•´í•œë‹¤
- [ ] `@RequiredArgsConstructor`ê°€ DIì™€ ì–´ë–»ê²Œ ì—°ê²°ë˜ëŠ”ì§€ ì•ˆë‹¤
- [ ] `@Slf4j`ë¡œ ë¡œê¹…í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‹¤

### Validation ê´€ë ¨
- [ ] `@Valid`ê°€ ì—†ìœ¼ë©´ ê²€ì¦ì´ ì•ˆ ëœë‹¤ëŠ” ê±¸ ì•ˆë‹¤
- [ ] `@NotBlank`, `@Email`, `@Size` ë“±ì˜ ê²€ì¦ ê·œì¹™ì„ ì•ˆë‹¤
- [ ] ê²€ì¦ ì‹¤íŒ¨ ì‹œ ì–´ë–¤ ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ”ì§€ ì•ˆë‹¤

### Spring ê³„ì¸µ ê´€ë ¨
- [ ] `@Repository`, `@Service`, `@RestController`ì˜ ì—­í• ì„ êµ¬ë¶„í•œë‹¤
- [ ] ì–´ë…¸í…Œì´ì…˜ì´ ì—†ìœ¼ë©´ Spring Beanìœ¼ë¡œ ë“±ë¡ ì•ˆ ëœë‹¤ëŠ” ê±¸ ì•ˆë‹¤
- [ ] `@RestController` = `@Controller` + `@ResponseBody` ì„ì„ ì•ˆë‹¤

### HTTP ë§¤í•‘ ê´€ë ¨
- [ ] `@GetMapping`, `@PostMapping` ë“±ì˜ ì°¨ì´ë¥¼ ì•ˆë‹¤
- [ ] `@PathVariable`ê³¼ `@RequestBody`ì˜ ì—­í• ì„ ì•ˆë‹¤
- [ ] `@RequestMapping`ìœ¼ë¡œ ê³µí†µ ê²½ë¡œë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‹¤

### ì˜ˆì™¸ ì²˜ë¦¬ ê´€ë ¨
- [ ] `@RestControllerAdvice`ê°€ ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•œë‹¤ëŠ” ê±¸ ì•ˆë‹¤
- [ ] `@ExceptionHandler`ë¡œ íŠ¹ì • ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‹¤

### Spring Boot ê¸°ë³¸
- [ ] `@SpringBootApplication`ì´ 3ê°œ ì–´ë…¸í…Œì´ì…˜ì˜ ì¡°í•©ì„ì„ ì•ˆë‹¤
- [ ] `@ComponentScan`ì˜ ìŠ¤ìº” ë²”ìœ„ë¥¼ ì´í•´í•œë‹¤

---

## ğŸ¯ ì‹¤ì „ ì—°ìŠµ ë¬¸ì œ

### ë¬¸ì œ 1: ì´ ì½”ë“œì˜ ë¬¸ì œì ì€?
```java
@Service
public class UserService {
    @Autowired  // í•„ë“œ ì£¼ì…
    private UserRepository userRepository;
}
```

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**ë¬¸ì œì :**
1. `final` ì‚¬ìš© ëª»í•¨ â†’ ë¶ˆë³€ì„± ë³´ì¥ ì•ˆ ë¨
2. í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë ¤ì›€
3. NPE ìœ„í—˜ (ì˜ì¡´ì„± ì£¼ì… ì‹¤íŒ¨í•´ë„ ê°ì²´ ìƒì„±ë¨)

**ê°œì„ :**
```java
@Service
@RequiredArgsConstructor  // ìƒì„±ì ì£¼ì…
public class UserService {
    private final UserRepository userRepository;
}
```
</details>

---

### ë¬¸ì œ 2: ì™œ ì—ëŸ¬ê°€ ë‚ ê¹Œ?
```java
@PostMapping
public UserResponse createUser(
    @RequestBody UserCreateRequest request) {  // @Valid ì—†ìŒ!
    return userService.createUser(request);
}
```

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**ë¬¸ì œì :**
- `@Valid`ê°€ ì—†ì–´ì„œ `@NotBlank`, `@Email` ë“±ì˜ ê²€ì¦ì´ ì‹¤í–‰ ì•ˆ ë¨
- ì˜ëª»ëœ ë°ì´í„°ê°€ ê·¸ëŒ€ë¡œ DBì— ì €ì¥ë¨

**í•´ê²°:**
```java
@PostMapping
public UserResponse createUser(
    @Valid @RequestBody UserCreateRequest request) {
    return userService.createUser(request);
}
```
</details>

---

### ë¬¸ì œ 3: ì´ í´ë˜ìŠ¤ëŠ” Spring Beanìœ¼ë¡œ ë“±ë¡ë ê¹Œ?
```java
package com.other.project;  // ë‹¤ë¥¸ íŒ¨í‚¤ì§€!

@Service
public class UserService { }

// ë©”ì¸ í´ë˜ìŠ¤
package com.example.hellospringapi;

@SpringBootApplication
public class HelloSpringApiApplication { }
```

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

**ì •ë‹µ: ì•„ë‹ˆì˜¤**

`@ComponentScan`ì€ `@SpringBootApplication`ì´ ìˆëŠ” íŒ¨í‚¤ì§€ì™€ ê·¸ í•˜ìœ„ íŒ¨í‚¤ì§€ë§Œ ìŠ¤ìº”í•©ë‹ˆë‹¤.

`UserService`ëŠ” `com.other.project` íŒ¨í‚¤ì§€ì— ìˆì–´ì„œ ìŠ¤ìº” ì•ˆ ë¨!

**í•´ê²°:**
1. ê°™ì€ íŒ¨í‚¤ì§€ë¡œ ì´ë™
2. ë˜ëŠ” ìˆ˜ë™ìœ¼ë¡œ ìŠ¤ìº” ë²”ìœ„ ì§€ì •:
```java
@SpringBootApplication
@ComponentScan(basePackages = {"com.example.hellospringapi", "com.other.project"})
public class HelloSpringApiApplication { }
```
</details>

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

ì–´ë…¸í…Œì´ì…˜ì„ ì´í•´í–ˆë‹¤ë©´:

1. **ì§ì ‘ íƒ€ì´í•‘í•˜ë©° ì‹¤ìŠµ** (ë³µë¶™ ê¸ˆì§€!)
2. **ê° ì–´ë…¸í…Œì´ì…˜ì„ í•˜ë‚˜ì”© ì œê±°í•´ë³´ë©° ì—ëŸ¬ í™•ì¸**
3. **Phase 1 ê°€ì´ë“œì˜ ì½”ë“œë¥¼ ë‹¤ì‹œ ì½ì–´ë³´ê¸°** (ì´ì œ ì´í•´ë¨!)

ê¶ê¸ˆí•œ ì–´ë…¸í…Œì´ì…˜ì´ ìˆê±°ë‚˜, íŠ¹ì • ì–´ë…¸í…Œì´ì…˜ì„ ë” ê¹Šì´ ì•Œê³  ì‹¶ìœ¼ë©´ ë§ì”€í•´ì£¼ì„¸ìš”! ğŸ¯
